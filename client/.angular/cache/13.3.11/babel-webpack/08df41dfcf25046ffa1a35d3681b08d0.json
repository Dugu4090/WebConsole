{"ast":null,"code":"import { Icons } from 'src/app/shared/icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/webconsole.service\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@fortawesome/angular-fontawesome\";\nimport * as i6 from \"@ngx-translate/core\";\n\nconst _c0 = function (a1) {\n  return [\"/console\", a1];\n};\n\nfunction ServerToolbarComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"span\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"fa-icon\", 6);\n    i0.ɵɵlistener(\"click\", function ServerToolbarComponent_div_1_Template_fa_icon_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const server_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.disconnectServer(server_r4);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const server_r4 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, server_r4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(server_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r0.icons.faXmark);\n  }\n}\n\nfunction ServerToolbarComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"fa-icon\", 8);\n    i0.ɵɵlistener(\"click\", function ServerToolbarComponent_div_3_Template_fa_icon_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n\n      const _r2 = i0.ɵɵreference(5);\n\n      return ctx_r7.openOffcanvas(_r2);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.icons.faAdd);\n  }\n}\n\nfunction ServerToolbarComponent_ng_template_4_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"LAYOUT.NoConnectedToServers\"));\n  }\n}\n\nfunction ServerToolbarComponent_ng_template_4_div_6_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 16)(1, \"a\", 17);\n    i0.ɵɵlistener(\"click\", function ServerToolbarComponent_ng_template_4_div_6_li_2_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const offcanvas_r9 = i0.ɵɵnextContext(2).$implicit;\n      return offcanvas_r9.dismiss(\"Connect\");\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 18);\n    i0.ɵɵlistener(\"click\", function ServerToolbarComponent_ng_template_4_div_6_li_2_Template_a_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const server_r13 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(3);\n      return ctx_r17.disconnectServer(server_r13);\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const server_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, server_r13));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(server_r13);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", i0.ɵɵpipeBind1(5, 3, \"LAYOUT.Disconnect\"), \")\");\n  }\n}\n\nfunction ServerToolbarComponent_ng_template_4_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"ul\", 14);\n    i0.ɵɵtemplate(2, ServerToolbarComponent_ng_template_4_div_6_li_2_Template, 6, 7, \"li\", 15);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r11.currentlyConnectedServers);\n  }\n}\n\nfunction ServerToolbarComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"h4\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ServerToolbarComponent_ng_template_4_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const offcanvas_r9 = restoredCtx.$implicit;\n      return offcanvas_r9.dismiss(\"Cross click\");\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, ServerToolbarComponent_ng_template_4_div_5_Template, 4, 3, \"div\", 12);\n    i0.ɵɵtemplate(6, ServerToolbarComponent_ng_template_4_div_6_Template, 3, 1, \"div\", 12);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, \"LAYOUT.CurrentlyConnectedTo\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentlyConnectedServers.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentlyConnectedServers.length != 0);\n  }\n}\n\nexport let ServerToolbarComponent = /*#__PURE__*/(() => {\n  class ServerToolbarComponent {\n    constructor(webConsoleService, offcanvasService) {\n      this.webConsoleService = webConsoleService;\n      this.offcanvasService = offcanvasService;\n      this.icons = Icons;\n      this.currentlyConnectedServers = [];\n      this.maxTabsToShow = 0;\n    }\n\n    ngOnInit() {\n      this.webConsoleService.getActiveConnectionsChangedSubject().subscribe({\n        next: () => this.currentlyConnectedServers = this.webConsoleService.getCurrentConnectedServers()\n      });\n      this.onResize();\n    }\n\n    disconnectServer(serverName) {\n      this.webConsoleService.closeConnection(serverName);\n    }\n\n    onResize(event) {\n      const windowWidth = window.innerWidth; //Each tab take aprox. 230px, with this info we can calculate how many tabs can we show at once\n\n      this.maxTabsToShow = Math.floor(windowWidth / 240);\n    }\n\n    openOffcanvas(offcanvasContent) {\n      this.offcanvasService.open(offcanvasContent, {\n        ariaLabelledBy: 'offcanvas-connected-servers',\n        position: \"end\"\n      });\n    }\n\n  }\n\n  ServerToolbarComponent.ɵfac = function ServerToolbarComponent_Factory(t) {\n    return new (t || ServerToolbarComponent)(i0.ɵɵdirectiveInject(i1.WebconsoleService), i0.ɵɵdirectiveInject(i2.NgbOffcanvas));\n  };\n\n  ServerToolbarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ServerToolbarComponent,\n    selectors: [[\"app-server-toolbar\"]],\n    hostBindings: function ServerToolbarComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function ServerToolbarComponent_resize_HostBindingHandler($event) {\n          return ctx.onResize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 6,\n    vars: 6,\n    consts: [[1, \"toolbar\", \"d-none\", \"d-lg-block\"], [\"class\", \"toolbar-item ms-2 me-2 d-inline-flex\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"toolbar-item-all ms-2 me-2 d-inline-flex\", 4, \"ngIf\"], [\"navbarOffcanvasContent\", \"\"], [1, \"toolbar-item\", \"ms-2\", \"me-2\", \"d-inline-flex\"], [\"routerLinkActive\", \"bg-primary\", 1, \"toolbar-item-description\", \"hover\", \"ps-3\", \"pe-3\", \"flex-grow-1\", \"d-flex\", \"align-items-center\", 3, \"routerLink\"], [1, \"toolbar-item-close\", \"hover\", \"d-flex\", \"align-items-center\", \"justify-content-center\", 3, \"icon\", \"click\"], [1, \"toolbar-item-all\", \"ms-2\", \"me-2\", \"d-inline-flex\"], [1, \"toolbar-item-all-icon\", \"hover\", \"d-flex\", \"align-items-center\", \"justify-content-center\", 3, \"icon\", \"click\"], [1, \"offcanvas-header\"], [\"id\", \"offcanvas-basic-title\", 1, \"offcanvas-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [\"class\", \"offcanvas-body\", 4, \"ngIf\"], [1, \"offcanvas-body\"], [1, \"nav\", \"flex-column\"], [\"class\", \"nav-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"nav-item\"], [1, \"d-inline-block\", \"nav-link\", \"active\", 3, \"routerLink\", \"click\"], [1, \"d-inline-block\", \"nav-link\", \"active\", 3, \"click\"]],\n    template: function ServerToolbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ServerToolbarComponent_div_1_Template, 4, 5, \"div\", 1);\n        i0.ɵɵpipe(2, \"slice\");\n        i0.ɵɵtemplate(3, ServerToolbarComponent_div_3_Template, 2, 1, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, ServerToolbarComponent_ng_template_4_Template, 7, 5, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(2, 2, ctx.currentlyConnectedServers, 0, ctx.maxTabsToShow));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentlyConnectedServers.length > ctx.maxTabsToShow);\n      }\n    },\n    directives: [i3.NgForOf, i4.RouterLinkActive, i4.RouterLink, i5.FaIconComponent, i3.NgIf, i4.RouterLinkWithHref],\n    pipes: [i3.SlicePipe, i6.TranslatePipe],\n    styles: [\".toolbar[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0}.toolbar-item[_ngcontent-%COMP%]{width:200px;background-color:var(--bs-dark);color:#fff;border-radius:10px 10px 0 0}.toolbar-item-description[_ngcontent-%COMP%]{height:35px;border-radius:10px 0 0;border-style:solid;border-color:#fff;border-width:0 1px 0 0}.toolbar-item-close[_ngcontent-%COMP%]{height:35px;width:30px;border-radius:0 10px 0 0}.hover[_ngcontent-%COMP%]:hover{background-color:var(--bs-secondary);cursor:pointer}.toolbar-item-all[_ngcontent-%COMP%]{background-color:var(--bs-dark);color:#fff;border-radius:10px 10px 0 0}.toolbar-item-all-icon[_ngcontent-%COMP%]{height:38px;width:35px;border-radius:10px 10px 0 0}a[_ngcontent-%COMP%]:hover{cursor:pointer}\"]\n  });\n  return ServerToolbarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}