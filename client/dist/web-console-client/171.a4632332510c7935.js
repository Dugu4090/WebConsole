"use strict";(self.webpackChunkWebConsoleClient=self.webpackChunkWebConsoleClient||[]).push([[171],{2171:(Je,F,_)=>{_.r(F),_.d(F,{ContentModule:()=>Le});var C=_(4375),S=_(2457),u=_(3466),k=_(8188),h=_(3897),A=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r},p=(()=>{return(r=p||(p={}))[r.EOS=0]="EOS",r[r.Text=1]="Text",r[r.Incomplete=2]="Incomplete",r[r.ESC=3]="ESC",r[r.Unknown=4]="Unknown",r[r.SGR=5]="SGR",r[r.OSCURL=6]="OSCURL",p;var r})();class U{constructor(){this.VERSION="6.0.6",this.setup_palettes(),this._use_classes=!1,this.bold=!1,this.faint=!1,this.italic=!1,this.underline=!1,this.fg=this.bg=null,this._buffer="",this._url_allowlist={http:1,https:1},this._escape_html=!0,this.boldStyle="font-weight:bold",this.faintStyle="opacity:0.7",this.italicStyle="font-style:italic",this.underlineStyle="text-decoration:underline"}set use_classes(i){this._use_classes=i}get use_classes(){return this._use_classes}set url_allowlist(i){this._url_allowlist=i}get url_allowlist(){return this._url_allowlist}set escape_html(i){this._escape_html=i}get escape_html(){return this._escape_html}set boldStyle(i){this._boldStyle=i}get boldStyle(){return this._boldStyle}set faintStyle(i){this._faintStyle=i}get faintStyle(){return this._faintStyle}set italicStyle(i){this._italicStyle=i}get italicStyle(){return this._italicStyle}set underlineStyle(i){this._underlineStyle=i}get underlineStyle(){return this._underlineStyle}setup_palettes(){this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.palette_256=[],this.ansi_colors.forEach(n=>{n.forEach(o=>{this.palette_256.push(o)})});let i=[0,95,135,175,215,255];for(let n=0;n<6;++n)for(let o=0;o<6;++o)for(let s=0;s<6;++s)this.palette_256.push({rgb:[i[n],i[o],i[s]],class_name:"truecolor"});let t=8;for(let n=0;n<24;++n,t+=10)this.palette_256.push({rgb:[t,t,t],class_name:"truecolor"})}escape_txt_for_html(i){return this._escape_html?i.replace(/[&<>"']/gm,t=>"&"===t?"&amp;":"<"===t?"&lt;":">"===t?"&gt;":'"'===t?"&quot;":"'"===t?"&#x27;":void 0):i}append_buffer(i){this._buffer=this._buffer+i}get_next_packet(){var i={kind:p.EOS,text:"",url:""},t=this._buffer.length;if(0==t)return i;var n=this._buffer.indexOf("\x1b");if(-1==n)return i.kind=p.Text,i.text=this._buffer,this._buffer="",i;if(n>0)return i.kind=p.Text,i.text=this._buffer.slice(0,n),this._buffer=this._buffer.slice(n),i;if(0==n){if(t<3)return i.kind=p.Incomplete,i;var o=this._buffer.charAt(1);if("["!=o&&"]"!=o&&"("!=o)return i.kind=p.ESC,i.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),i;if("["==o){this._csi_regex||(this._csi_regex=M(I||(I=A(["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \x1b[                      # CSI\n                          ([<-?]?)              # private-mode char\n                          ([d;]*)                    # any digits or semicolons\n                          ([ -/]?               # an intermediate modifier\n                          [@-~])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \x1b[                      # CSI\n                          [ -~]*                # anything legal\n                          ([\0-\x1f:])              # anything illegal\n                        )\n                    "],["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \\x1b\\[                      # CSI\n                          ([\\x3c-\\x3f]?)              # private-mode char\n                          ([\\d;]*)                    # any digits or semicolons\n                          ([\\x20-\\x2f]?               # an intermediate modifier\n                          [\\x40-\\x7e])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \\x1b\\[                      # CSI\n                          [\\x20-\\x7e]*                # anything legal\n                          ([\\x00-\\x1f:])              # anything illegal\n                        )\n                    "]))));let l=this._buffer.match(this._csi_regex);return null===l?(i.kind=p.Incomplete,i):l[4]?(i.kind=p.ESC,i.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),i):(i.kind=""!=l[1]||"m"!=l[3]?p.Unknown:p.SGR,i.text=l[2],this._buffer=this._buffer.slice(l[0].length),i)}if("]"==o){if(t<4)return i.kind=p.Incomplete,i;if("8"!=this._buffer.charAt(2)||";"!=this._buffer.charAt(3))return i.kind=p.ESC,i.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),i;this._osc_st||(this._osc_st=function O(r,...i){let o=r.raw[0].replace(/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,"");return new RegExp(o,"g")}(N||(N=A(["\n                        (?:                         # legal sequence\n                          (\x1b\\)                    # ESC                           |                           # alternate\n                          (\x07)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\0-\x06]                 # anything illegal\n                          |                           # alternate\n                          [\b-\x1a]                 # anything illegal\n                          |                           # alternate\n                          [\x1c-\x1f]                 # anything illegal\n                        )\n                    "],["\n                        (?:                         # legal sequence\n                          (\\x1b\\\\)                    # ESC \\\n                          |                           # alternate\n                          (\\x07)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\\x00-\\x06]                 # anything illegal\n                          |                           # alternate\n                          [\\x08-\\x1a]                 # anything illegal\n                          |                           # alternate\n                          [\\x1c-\\x1f]                 # anything illegal\n                        )\n                    "])))),this._osc_st.lastIndex=0;{let d=this._osc_st.exec(this._buffer);if(null===d)return i.kind=p.Incomplete,i;if(d[3])return i.kind=p.ESC,i.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),i}{let d=this._osc_st.exec(this._buffer);if(null===d)return i.kind=p.Incomplete,i;if(d[3])return i.kind=p.ESC,i.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),i}this._osc_regex||(this._osc_regex=M(E||(E=A(["\n                        ^                           # beginning of line\n                                                    #\n                        \x1b]8;                    # OSC Hyperlink\n                        [ -:<-~]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([!-~]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\x1b\\)                  # ESC                           |                           # alternate\n                          (?:\x07)                    # BEL (what xterm did)\n                        )\n                        ([ -~]+)              # TEXT capture\n                        \x1b]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\x1b\\)                  # ESC                           |                           # alternate\n                          (?:\x07)                    # BEL (what xterm did)\n                        )\n                    "],["\n                        ^                           # beginning of line\n                                                    #\n                        \\x1b\\]8;                    # OSC Hyperlink\n                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([\\x21-\\x7e]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                        ([\\x20-\\x7e]+)              # TEXT capture\n                        \\x1b\\]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                    "]))));let l=this._buffer.match(this._osc_regex);return null===l?(i.kind=p.ESC,i.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),i):(i.kind=p.OSCURL,i.url=l[1],i.text=l[2],this._buffer=this._buffer.slice(l[0].length),i)}if("("==o)return i.kind=p.Unknown,this._buffer=this._buffer.slice(3),i}}ansi_to_html(i){this.append_buffer(i);for(var t=[];;){var n=this.get_next_packet();if(n.kind==p.EOS||n.kind==p.Incomplete)break;n.kind==p.ESC||n.kind==p.Unknown||(n.kind==p.Text?t.push(this.transform_to_html(this.with_state(n))):n.kind==p.SGR?this.process_ansi(n):n.kind==p.OSCURL&&t.push(this.process_hyperlink(n)))}return t.join("")}with_state(i){return{bold:this.bold,faint:this.faint,italic:this.italic,underline:this.underline,fg:this.fg,bg:this.bg,text:i.text}}process_ansi(i){let t=i.text.split(";");for(;t.length>0;){let n=t.shift(),o=parseInt(n,10);if(isNaN(o)||0===o)this.fg=null,this.bg=null,this.bold=!1,this.faint=!1,this.italic=!1,this.underline=!1;else if(1===o)this.bold=!0;else if(2===o)this.faint=!0;else if(3===o)this.italic=!0;else if(4===o)this.underline=!0;else if(21===o)this.bold=!1;else if(22===o)this.faint=!1,this.bold=!1;else if(23===o)this.italic=!1;else if(24===o)this.underline=!1;else if(39===o)this.fg=null;else if(49===o)this.bg=null;else if(o>=30&&o<38)this.fg=this.ansi_colors[0][o-30];else if(o>=40&&o<48)this.bg=this.ansi_colors[0][o-40];else if(o>=90&&o<98)this.fg=this.ansi_colors[1][o-90];else if(o>=100&&o<108)this.bg=this.ansi_colors[1][o-100];else if((38===o||48===o)&&t.length>0){let s=38===o,l=t.shift();if("5"===l&&t.length>0){let a=parseInt(t.shift(),10);a>=0&&a<=255&&(s?this.fg=this.palette_256[a]:this.bg=this.palette_256[a])}if("2"===l&&t.length>2){let a=parseInt(t.shift(),10),d=parseInt(t.shift(),10),g=parseInt(t.shift(),10);if(a>=0&&a<=255&&d>=0&&d<=255&&g>=0&&g<=255){let f={rgb:[a,d,g],class_name:"truecolor"};s?this.fg=f:this.bg=f}}}}}transform_to_html(i){let t=i.text;if(0===t.length||(t=this.escape_txt_for_html(t),!(i.bold||i.italic||i.faint||i.underline||null!==i.fg||null!==i.bg)))return t;let n=[],o=[],s=i.fg,l=i.bg;i.bold&&n.push(this._boldStyle),i.faint&&n.push(this._faintStyle),i.italic&&n.push(this._italicStyle),i.underline&&n.push(this._underlineStyle),this._use_classes?(s&&("truecolor"!==s.class_name?o.push(`${s.class_name}-fg`):n.push(`color:rgb(${s.rgb.join(",")})`)),l&&("truecolor"!==l.class_name?o.push(`${l.class_name}-bg`):n.push(`background-color:rgb(${l.rgb.join(",")})`))):(s&&n.push(`color:rgb(${s.rgb.join(",")})`),l&&n.push(`background-color:rgb(${l.rgb})`));let a="",d="";return o.length&&(a=` class="${o.join(" ")}"`),n.length&&(d=` style="${n.join(";")}"`),`<span${d}${a}>${t}</span>`}process_hyperlink(i){let t=i.url.split(":");return t.length<1||!this._url_allowlist[t[0]]?"":`<a href="${this.escape_txt_for_html(i.url)}">${this.escape_txt_for_html(i.text)}</a>`}}function M(r,...i){let o=r.raw[0].replace(/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,"");return new RegExp(o)}var I,N,E,e=_(5e3),T=_(8686),v=_(6342),m=_(9808),w=_(9546),c=_(3075),b=_(7232),P=_(2313);let L=(()=>{class r{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(P.H7,16))},r.\u0275pipe=e.Yjl({name:"sanitize",type:r,pure:!0}),r})();const D=["consoleDiv"],J=["setPasswordModal"],R=["commandInput"];function H(r,i){if(1&r&&e._UZ(0,"fa-icon",30),2&r){const t=e.oxw(2);e.Q6J("icon",t.icons.faEye)}}function G(r,i){if(1&r&&e._UZ(0,"fa-icon",30),2&r){const t=e.oxw(2);e.Q6J("icon",t.icons.faEyeSlash)}}function Q(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.showServerInfo=!o.showServerInfo}),e.YNc(1,H,1,1,"fa-icon",29),e.YNc(2,G,1,1,"fa-icon",29),e._uU(3),e.ALo(4,"translate"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.showServerInfo),e.xp6(1),e.Q6J("ngIf",t.showServerInfo),e.xp6(1),e.hij(" ",e.lcZ(4,3,"CONSOLE.ToggleServerInfo")," ")}}function j(r,i){1&r&&(e.TgZ(0,"span",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CONSOLE.Connected")))}function Y(r,i){1&r&&(e.TgZ(0,"span",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CONSOLE.Disconnected")))}function V(r,i){if(1&r&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.lnq("",e.lcZ(2,3,"CONSOLE.LoggedInAs")," ",t.loggedInUsername," (",t.loggedInAs,")")}}function B(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",34)(2,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().requestPassword()}),e._UZ(3,"fa-icon",30),e._uU(4),e.ALo(5,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("icon",t.icons.faLock),e.xp6(1),e.hij(" ",e.lcZ(5,2,"CONSOLE.ClickToLogin")," ")}}function $(r,i){1&r&&(e.TgZ(0,"div",36)(1,"div",37)(2,"span",38),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"GENERAL.Loading")),e.xp6(3),e.Oqu(e.lcZ(7,4,"CONSOLE.Connecting")))}function X(r,i){if(1&r&&(e.TgZ(0,"div",36),e._UZ(1,"fa-icon",39),e.TgZ(2,"p",40),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"p",40),e._uU(6),e.ALo(7,"translate"),e.TgZ(8,"a",41),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._uU(11),e.ALo(12,"translate"),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.icons.faXmark),e.xp6(2),e.Oqu(e.lcZ(4,5,"CONSOLE.CannotConnect")),e.xp6(3),e.hij("",e.lcZ(7,7,"CONSOLE.CannotConnectDescription1")," "),e.xp6(3),e.Oqu(e.lcZ(10,9,"CONSOLE.Tool")),e.xp6(2),e.hij(" ",e.lcZ(12,11,"CONSOLE.CannotConnectDescription2")," ")}}function z(r,i){1&r&&(e.TgZ(0,"small",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CONSOLE.WrongPassword")))}function W(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",42)(1,"h4",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",44),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA()(),e.TgZ(5,"div",45)(6,"form",46)(7,"div",34)(8,"input",47,48),e.NdJ("keyup.enter",function(){const s=e.CHM(t).$implicit,l=e.MAs(9),a=e.MAs(14);return e.oxw().setPassword(l.value,a.checked),s.close()}),e.qZA(),e.YNc(10,z,3,3,"small",49),e.qZA(),e.TgZ(11,"div",34)(12,"div",50),e._UZ(13,"input",51,52),e.TgZ(15,"label",53),e._uU(16),e.ALo(17,"translate"),e.qZA()()()()(),e.TgZ(18,"div",54)(19,"button",55),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.MAs(9),a=e.MAs(14);return e.oxw().setPassword(l.value,a.checked),s.close()}),e._uU(20),e.ALo(21,"translate"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"CONSOLE.PasswordRequested")),e.xp6(8),e.Q6J("ngIf",t.savedPasswordSent),e.xp6(6),e.hij(" ",e.lcZ(17,6,"CONSOLE.RememberPassword")," "),e.xp6(4),e.Oqu(e.lcZ(21,8,"CONSOLE.Connect"))}}let K=(()=>{class r{constructor(t,n,o,s,l){this.route=t,this.router=n,this.storageService=o,this.webConsoleService=s,this.modalService=l,this.icons=S.P,this.consoleHtml="",this.connectedPlayers=0,this.maxPlayers=0,this.cpuUsage=0,this.ramFree=0,this.ramUsed=0,this.ramMax=0,this.tps=0,this.keepScrollDown=!0,this.showServerInfo=!0,this.showConsole=!1,this.loggedInUsername="",this.loggedInAs="",this.savedPasswordSent=!1,this.browsingCommandHistoryIndex=-1}ngOnInit(){console.log("Init console component");const n=this.route.snapshot.paramMap.get("serverName");if(!n)throw this.router.navigate([""]),Error("Server name not provided");const o=this.storageService.getServer(n);if(!o)throw this.router.navigate([""]),Error("Server name invalid");this.server=o,this.activeConnection=this.webConsoleService.connect(this.server.serverName),this.showConsole=this.activeConnection.connectionStatus==k.O.Connected,this.activeConnection.receivedMessages.forEach(s=>this.processMessage(s)),this.insightsInverval||(this.insightsInverval=setInterval(()=>{this.requestServerInsights()},2500)),this.subscription=this.activeConnection.subject$.subscribe({next:s=>{this.showConsole=!0,this.processMessage(s)},complete:()=>{this.showServerInfo=!1}})}ngAfterViewInit(){setTimeout(()=>{var t;return this.consoleDiv.nativeElement.scrollTop=null===(t=this.consoleDiv)||void 0===t?void 0:t.nativeElement.scrollHeight})}ngOnDestroy(){clearInterval(this.insightsInverval),this.subscription.unsubscribe()}processMessage(t){let n;switch(t.status){case 10:n=t,this.writeToWebConsole(n.message,n.time);break;case 200:n=t,this.loggedInUsername=n.username,this.loggedInAs=n.as;break;case 400:n=t,console.log("400 Unknown Comamnd",n);break;case 401:n=t,this.activeConnection.isLoggedIn||(this.server.serverPassword&&!this.savedPasswordSent?(this.savedPasswordSent=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.Login,this.server.serverPassword)):this.requestPassword());break;case 1e3:n=t,this.connectedPlayers=n.connectedPlayers,this.maxPlayers=n.maxPlayers;break;case 1001:n=t,this.cpuUsage=n.usage;break;case 1002:n=t,this.ramFree=n.free,this.ramUsed=n.used,this.ramMax=n.max;break;case 1003:n=t,this.tps=n.tps;break;default:console.error("Unrecognised response:",t)}}writeToWebConsole(t,n){var o,s,l;this.keepScrollDown=(null===(o=this.consoleDiv)||void 0===o?void 0:o.nativeElement.scrollHeight)-(null===(s=this.consoleDiv)||void 0===s?void 0:s.nativeElement.scrollTop)===(null===(l=this.consoleDiv)||void 0===l?void 0:l.nativeElement.clientHeight),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/</g,"&lt;")).replace(/(?:\r\n|\r|\n)/g,"<br>")).replace(/\xa70/g,"<span style='color: #000000;'>")).replace(/\xa71/g,"<span style='color: #0000AA;'>")).replace(/\xa72/g,"<span style='color: #00AA00;'>")).replace(/\xa73/g,"<span style='color: #00AAAA;'>")).replace(/\xa74/g,"<span style='color: #AA0000;'>")).replace(/\xa75/g,"<span style='color: #AA00AA;'>")).replace(/\xa76/g,"<span style='color: #FFAA00;'>")).replace(/\xa77/g,"<span style='color: #AAAAAA;'>")).replace(/\xa78/g,"<span style='color: #555555;'>")).replace(/\xa79/g,"<span style='color: #5555FF;'>")).replace(/\xa7a/g,"<span style='color: #55FF55;'>")).replace(/\xa7b/g,"<span style='color: #55FFFF;'>")).replace(/\xa7c/g,"<span style='color: #FF5555;'>")).replace(/\xa7d/g,"<span style='color: #FF55FF;'>")).replace(/\xa7e/g,"<span style='color: #FFFF55;'>")).replace(/\xa7f/g,"<span style='color: #FFFFFF;'>")).replace(/\xa7l/g,"<span style='font-weight:bold;'>")).replace(/\xa7m/g,"<span style='text-decoration: line-through;'>")).replace(/\xa7n/g,"<span style='text-decoration: underline;'>")).replace(/\xa7o/g,"<span style='font-style: italic;'>")).replace(/\xa7r/g,"</span>")).replace(/\x7f0/g,"<span style='color: #000000;'>")).replace(/\x7f1/g,"<span style='color: #0000AA;'>")).replace(/\x7f2/g,"<span style='color: #00AA00;'>")).replace(/\x7f3/g,"<span style='color: #00AAAA;'>")).replace(/\x7f4/g,"<span style='color: #AA0000;'>")).replace(/\x7f5/g,"<span style='color: #AA00AA;'>")).replace(/\x7f6/g,"<span style='color: #FFAA00;'>")).replace(/\x7f7/g,"<span style='color: #AAAAAA;'>")).replace(/\x7f8/g,"<span style='color: #555555;'>")).replace(/\x7f9/g,"<span style='color: #5555FF;'>")).replace(/\x7fa/g,"<span style='color: #55FF55;'>")).replace(/\x7fb/g,"<span style='color: #55FFFF;'>")).replace(/\x7fc/g,"<span style='color: #FF5555;'>")).replace(/\x7fd/g,"<span style='color: #FF55FF;'>")).replace(/\x7fe/g,"<span style='color: #FFFF55;'>")).replace(/\x7ff/g,"<span style='color: #FFFFFF;'>")).replace(/\x7fl/g,"<span style='font-weight:bold;'>")).replace(/\x7fm/g,"<span style='text-decoration: line-through;'>")).replace(/\x7fn/g,"<span style='text-decoration: underline;'>")).replace(/\x7fo/g,"<span style='font-style: italic;'>")).replace(/\x7fr/g,"</span>"),t=(new U).ansi_to_html(t),this.storageService.getSetting(h.U.DateTimePrefix)&&(null!=n?t="["+n+"] "+t:void 0!==n&&null===n||(t="["+(new Date).toLocaleTimeString()+"] "+t));const d=(t.match(/<span /g)||[]).length,g=(t.match(/<\/span> /g)||[]).length;this.consoleHtml+=t+"</span>".repeat(d-g)+"<br>"}requestPassword(){this.modalService.open(this.passwordModal,{size:"md"})}setPassword(t,n){n&&this.storageService.saveServer(this.server.serverName,this.server.serverURI,t),setTimeout(()=>this.savedPasswordSent=!0,200),this.webConsoleService.sendMessage(this.server.serverName,u.X.Login,t)}sendCommand(){const t=this.commandInput.nativeElement.value;!t||(this.commandInput.nativeElement.value="",this.browsingCommandHistoryIndex=-1,this.webConsoleService.sendMessage(this.server.serverName,u.X.Exec,t))}onKeyUpCommandInput(t){var n,o;if("Enter"===t.code)this.sendCommand();else if("ArrowUp"===t.code){const s=this.activeConnection.sentCommands.filter(l=>l.command===u.X.Exec);if(0==s.length)return;this.browsingCommandHistoryIndex<=0&&(this.browsingCommandHistoryIndex=s.length),this.commandInput.nativeElement.value=null===(n=s[this.browsingCommandHistoryIndex-1])||void 0===n?void 0:n.params,this.browsingCommandHistoryIndex=this.browsingCommandHistoryIndex-1}else if("ArrowDown"===t.code){const s=this.activeConnection.sentCommands.filter(l=>l.command===u.X.Exec);-1!==this.browsingCommandHistoryIndex&&(this.browsingCommandHistoryIndex>=s.length-1&&(this.browsingCommandHistoryIndex=-1),this.commandInput.nativeElement.value=null===(o=s[this.browsingCommandHistoryIndex+1])||void 0===o?void 0:o.params,this.browsingCommandHistoryIndex=this.browsingCommandHistoryIndex+1)}}requestServerInsights(){this.showServerInfo&&this.showConsole&&this.activeConnection.connectionStatus==k.O.Connected&&this.activeConnection.isLoggedIn&&(this.webConsoleService.sendMessage(this.server.serverName,u.X.Players),this.webConsoleService.sendMessage(this.server.serverName,u.X.CpuUsage),this.webConsoleService.sendMessage(this.server.serverName,u.X.RamUsage),this.webConsoleService.sendMessage(this.server.serverName,u.X.Tps))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.gz),e.Y36(C.F0),e.Y36(h.V),e.Y36(T.B),e.Y36(v.FF))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-console"]],viewQuery:function(t,n){if(1&t&&(e.Gf(D,5),e.Gf(J,5),e.Gf(R,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.consoleDiv=o.first),e.iGM(o=e.CRH())&&(n.passwordModal=o.first),e.iGM(o=e.CRH())&&(n.commandInput=o.first)}},decls:68,vars:52,consts:[[1,"row"],[1,"col"],[1,"col-md-auto","d-flex","align-self-center"],["type","button","class","btn btn-outline-primary",3,"click",4,"ngIf"],["class","badge bg-success me-1",4,"ngIf"],["class","badge bg-danger mb-3",4,"ngIf"],["class","badge bg-secondary mb-3",4,"ngIf"],[3,"ngbCollapse","ngbCollapseChange"],["collapseGlobal","ngbCollapse"],[1,"row",3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],[1,"col-lg-3"],[1,"card","mb-3"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","secondary",3,"value","striped","animated"],[3,"type","value","striped","animated"],["class","row",4,"ngIf"],[1,"card","mt-3","mb-3"],[1,"card-body","overflow-auto","text-light","bg-dark","console",3,"innerHTML","scrollTop"],["consoleDiv",""],[1,"input-group","mb-3"],["type","text","aria-label","Command","aria-describedby","button-command",1,"form-control",3,"disabled","keyup"],["commandInput",""],["type","button","id","button-command",1,"btn","btn-secondary",3,"disabled","click"],["class","d-flex flex-column min-vh-100 align-items-center",4,"ngIf"],["setPasswordModal",""],["type","button",1,"btn","btn-outline-primary",3,"click"],[3,"icon",4,"ngIf"],[3,"icon"],[1,"badge","bg-success","me-1"],[1,"badge","bg-danger","mb-3"],[1,"badge","bg-secondary","mb-3"],[1,"col-12"],["type","button",1,"btn","btn-warning","w-100",3,"click"],[1,"d-flex","flex-column","min-vh-100","align-items-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["size","3x",3,"icon"],[1,"mb-0"],["href","https://www.yougetsignal.com/tools/open-ports/","target","_blank"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3"],["type","password",1,"form-control",3,"keyup.enter"],["passwordInput",""],["class","form-text text-danger",4,"ngIf"],[1,"form-check"],["type","checkbox","id","rememberCheck",1,"form-check-input"],["rememberInput",""],["for","rememberCheck",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-text","text-danger"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e.YNc(5,Q,5,5,"button",3),e.qZA()(),e.YNc(6,j,3,3,"span",4),e.YNc(7,Y,3,3,"span",5),e.YNc(8,V,3,5,"span",6),e.TgZ(9,"div",7,8),e.NdJ("ngbCollapseChange",function(s){return!(n.showConsole=s)}),e.TgZ(11,"div",9,10),e.NdJ("ngbCollapseChange",function(s){return!(n.showServerInfo=s)}),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"h5",14),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"p",15),e._uU(20),e.qZA(),e.TgZ(21,"p",15),e._UZ(22,"ngb-progressbar",16),e.qZA()()()(),e.TgZ(23,"div",11)(24,"div",12)(25,"div",13)(26,"h5",14),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"p",15),e._uU(30),e.qZA(),e.TgZ(31,"p",15),e._UZ(32,"ngb-progressbar",17),e.qZA()()()(),e.TgZ(33,"div",11)(34,"div",12)(35,"div",13)(36,"h5",14),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"p",15),e._uU(40),e.qZA(),e.TgZ(41,"p",15),e._UZ(42,"ngb-progressbar",17),e.qZA()()()(),e.TgZ(43,"div",11)(44,"div",12)(45,"div",13)(46,"h5",14),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"p",15),e._uU(50),e.qZA(),e.TgZ(51,"p",15),e._UZ(52,"ngb-progressbar",17),e.qZA()()()()(),e.YNc(53,B,6,4,"div",18),e.TgZ(54,"div",19),e._UZ(55,"div",20,21),e.ALo(57,"sanitize"),e.qZA(),e.TgZ(58,"div",22)(59,"input",23,24),e.NdJ("keyup",function(s){return n.onKeyUpCommandInput(s)}),e.qZA(),e.TgZ(61,"button",25),e.NdJ("click",function(){return n.sendCommand()}),e._uU(62),e.ALo(63,"translate"),e.qZA()()(),e.YNc(64,$,8,6,"div",26),e.YNc(65,X,13,13,"div",26),e.YNc(66,W,22,10,"ng-template",null,27,e.W1O)),2&t){const o=e.MAs(56);e.xp6(3),e.Oqu(n.server.serverName),e.xp6(2),e.Q6J("ngIf",n.showConsole),e.xp6(1),e.Q6J("ngIf",2==n.activeConnection.connectionStatus),e.xp6(1),e.Q6J("ngIf",3==n.activeConnection.connectionStatus&&n.showConsole),e.xp6(1),e.Q6J("ngIf",2==n.activeConnection.connectionStatus&&n.loggedInUsername),e.xp6(1),e.Q6J("ngbCollapse",!n.showConsole),e.xp6(2),e.Q6J("ngbCollapse",!n.showServerInfo),e.xp6(6),e.Oqu(e.lcZ(18,40,"CONSOLE.PlayersOnline")),e.xp6(3),e.AsE("",n.connectedPlayers," / ",n.maxPlayers,""),e.xp6(2),e.Q6J("value",100*n.connectedPlayers/n.maxPlayers)("striped",!0)("animated",!0),e.xp6(5),e.Oqu(e.lcZ(28,42,"CONSOLE.CpuUsage")),e.xp6(3),e.hij("",n.cpuUsage,"%"),e.xp6(2),e.Q6J("type",n.cpuUsage>80?"danger":"secondary")("value",n.cpuUsage)("striped",!0)("animated",!0),e.xp6(5),e.Oqu(e.lcZ(38,44,"CONSOLE.RamUsage")),e.xp6(3),e.AsE("",n.ramUsed," MB / ",n.ramMax," MB"),e.xp6(2),e.Q6J("type",100*n.ramUsed/n.ramMax>80?"danger":"secondary")("value",100*n.ramUsed/n.ramMax)("striped",!0)("animated",!0),e.xp6(5),e.Oqu(e.lcZ(48,46,"CONSOLE.Tps")),e.xp6(3),e.hij("",n.tps," / 20"),e.xp6(2),e.Q6J("type",100*n.tps/20>80?"success":"secondary")("value",100*n.tps/20)("striped",!0)("animated",!0),e.xp6(1),e.Q6J("ngIf",!n.activeConnection.isLoggedIn),e.xp6(2),e.Q6J("innerHTML",e.lcZ(57,48,n.consoleHtml),e.oJD)("scrollTop",n.keepScrollDown?o.scrollHeight:o.scrollTop),e.xp6(4),e.Q6J("disabled",2!=n.activeConnection.connectionStatus),e.xp6(2),e.Q6J("disabled",2!=n.activeConnection.connectionStatus),e.xp6(1),e.Oqu(e.lcZ(63,50,"CONSOLE.Send")),e.xp6(2),e.Q6J("ngIf",1==n.activeConnection.connectionStatus),e.xp6(1),e.Q6J("ngIf",3==n.activeConnection.connectionStatus&&!n.showConsole)}},directives:[m.O5,w.BN,v._D,v.Ly,c._Y,c.JL,c.F],pipes:[b.X$,L],styles:[".console[_ngcontent-%COMP%]{height:480px}"]}),r})();const ee=["fileInput"],te=["editorTextarea"];function ne(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1,"/"),e.qZA())}function oe(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"span",21)(1,"span",22),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().navigateToPath(s)}),e._uU(2),e.qZA(),e.YNc(3,ne,2,0,"span",23),e.qZA()}if(2&r){const t=i.$implicit,n=i.index,o=e.oxw();e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",n<o.pathParts.length-1)}}function re(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).downloadFile(s,o)}),e.ALo(1,"translate"),e._UZ(2,"i",36),e.qZA()}2&r&&e.s9C("title",e.lcZ(1,1,"files.download"))}function ie(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return s.is_folder?l.navigateToFolder(s):l.selectFile(s)})("contextmenu",function(o){const l=e.CHM(t).$implicit;return e.oxw(2).onContextMenu(o,l)}),e.TgZ(1,"td"),e._UZ(2,"i"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e.YNc(10,re,3,3,"button",32),e.TgZ(11,"button",33),e.NdJ("click",function(o){const l=e.CHM(t).$implicit;return e.oxw(2).deleteFile(l,o)}),e.ALo(12,"translate"),e._UZ(13,"i",34),e.qZA()()()}if(2&r){const t=i.$implicit,n=e.oxw(2);e.ekj("clickable",!0)("folder-row",t.is_folder),e.xp6(2),e.Gre("fas ",n.getFileIcon(t),""),e.ekj("folder-icon",t.is_folder),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(n.formatFileSize(t.size)),e.xp6(2),e.Oqu(e.xi3(8,14,t.last_modified,"medium")),e.xp6(3),e.Q6J("ngIf",!t.is_folder),e.xp6(1),e.s9C("title",e.lcZ(12,17,"files.delete"))}}function se(r,i){1&r&&(e.TgZ(0,"tr")(1,"td",37),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"files.empty_folder")))}function le(r,i){if(1&r&&(e.TgZ(0,"div",24)(1,"table",25)(2,"thead")(3,"tr")(4,"th",26),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",27),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",28),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",29),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,ie,14,19,"tr",30),e.YNc(18,se,4,3,"tr",23),e.qZA()()()),2&r){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,6,"files.name")),e.xp6(3),e.Oqu(e.lcZ(9,8,"files.size")),e.xp6(3),e.Oqu(e.lcZ(12,10,"files.last_modified")),e.xp6(3),e.Oqu(e.lcZ(15,12,"files.actions")),e.xp6(3),e.Q6J("ngForOf",t.files),e.xp6(1),e.Q6J("ngIf",0===t.files.length)}}function ae(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"span",40),e._UZ(3,"i",41),e._uU(4),e.qZA(),e.TgZ(5,"div",42)(6,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveFile()}),e._UZ(7,"i",44),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEdit()}),e._UZ(11,"i",46),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",47)(15,"textarea",48,49),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().fileContent=o})("ngModelChange",function(){return e.CHM(t),e.oxw().onContentChange()}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(4),e.hij(" ",t.editingFile.name," "),e.xp6(2),e.Q6J("disabled",!t.fileContentChanged),e.xp6(2),e.hij(" ",e.lcZ(9,5,"files.save")," "),e.xp6(4),e.hij(" ",e.lcZ(13,7,"files.cancel")," "),e.xp6(3),e.Q6J("ngModel",t.fileContent)}}function ce(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).downloadSelectedFile()}),e._UZ(1,"i",36),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"files.download")," "))}function de(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",51),e.NdJ("click",function(){return e.CHM(t),e.oxw().openFile()}),e._UZ(2,"i",52),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,ce,4,3,"div",53),e.TgZ(6,"div",51),e.NdJ("click",function(){return e.CHM(t),e.oxw().renameSelectedFile()}),e._UZ(7,"i",52),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteSelectedFile()}),e._UZ(11,"i",34),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"div",55),e.TgZ(15,"div",51),e.NdJ("click",function(){return e.CHM(t),e.oxw().copyPath()}),e._UZ(16,"i",56),e._uU(17),e.ALo(18,"translate"),e.qZA()()}if(2&r){const t=e.oxw();e.Udp("top",t.contextMenuTop,"px")("left",t.contextMenuLeft,"px"),e.xp6(3),e.hij(" ",e.lcZ(4,9,"files.open")," "),e.xp6(2),e.Q6J("ngIf",!(null!=t.selectedContextFile&&t.selectedContextFile.is_folder)),e.xp6(3),e.hij(" ",e.lcZ(9,11,"files.rename")," "),e.xp6(4),e.hij(" ",e.lcZ(13,13,"files.delete")," "),e.xp6(5),e.hij(" ",e.lcZ(18,15,"files.copy_path")," ")}}function pe(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",57),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAllModals()}),e.qZA()}}function ue(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"h5",60),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",61),e.NdJ("click",function(){return e.CHM(t),e.oxw().showCreateFolderModal=!1}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",62)(8,"input",63),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newFolderName=o})("keyup.enter",function(){return e.CHM(t),e.oxw().createFolder()}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",64)(11,"button",65),e.NdJ("click",function(){return e.CHM(t),e.oxw().showCreateFolderModal=!1}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw().createFolder()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"files.create_folder")),e.xp6(5),e.s9C("placeholder",e.lcZ(9,7,"files.folder_name")),e.Q6J("ngModel",t.newFolderName),e.xp6(4),e.Oqu(e.lcZ(13,9,"files.cancel")),e.xp6(3),e.Oqu(e.lcZ(16,11,"files.create"))}}function _e(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"h5",60),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",61),e.NdJ("click",function(){return e.CHM(t),e.oxw().showCreateFileModal=!1}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",62)(8,"input",63),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().newFileName=o})("keyup.enter",function(){return e.CHM(t),e.oxw().createFile()}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",64)(11,"button",65),e.NdJ("click",function(){return e.CHM(t),e.oxw().showCreateFileModal=!1}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw().createFile()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"files.create_file")),e.xp6(5),e.s9C("placeholder",e.lcZ(9,7,"files.file_name")),e.Q6J("ngModel",t.newFileName),e.xp6(4),e.Oqu(e.lcZ(13,9,"files.cancel")),e.xp6(3),e.Oqu(e.lcZ(16,11,"files.create"))}}function he(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"h5",60),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",61),e.NdJ("click",function(){return e.CHM(t),e.oxw().showRenameModal=!1}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",62)(8,"input",63),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().renameNewName=o})("keyup.enter",function(){return e.CHM(t),e.oxw().renameFile()}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",64)(11,"button",65),e.NdJ("click",function(){return e.CHM(t),e.oxw().showRenameModal=!1}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw().renameFile()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"files.rename")),e.xp6(5),e.s9C("placeholder",e.lcZ(9,7,"files.new_name")),e.Q6J("ngModel",t.renameNewName),e.xp6(4),e.Oqu(e.lcZ(13,9,"files.cancel")),e.xp6(3),e.Oqu(e.lcZ(16,11,"files.rename"))}}function ge(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"h5",60),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",61),e.NdJ("click",function(){return e.CHM(t),e.oxw().showDeleteConfirmModal=!1}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",62)(8,"p"),e._uU(9),e.ALo(10,"translate"),e.TgZ(11,"strong"),e._uU(12),e.qZA(),e._uU(13,"?"),e.qZA()(),e.TgZ(14,"div",64)(15,"button",65),e.NdJ("click",function(){return e.CHM(t),e.oxw().showDeleteConfirmModal=!1}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmDelete()}),e._uU(19),e.ALo(20,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"files.delete_confirm_title")),e.xp6(6),e.hij("",e.lcZ(10,7,"files.delete_confirm_message")," "),e.xp6(3),e.Oqu(null==t.selectedContextFile?null:t.selectedContextFile.name),e.xp6(4),e.Oqu(e.lcZ(17,9,"files.cancel")),e.xp6(3),e.Oqu(e.lcZ(20,11,"files.delete"))}}function fe(r,i){1&r&&(e.TgZ(0,"div",68)(1,"div",69)(2,"span",70),e._uU(3,"Loading..."),e.qZA()()())}let me=(()=>{class r{constructor(t,n,o,s,l){this.route=t,this.router=n,this.storageService=o,this.webConsoleService=s,this.modalService=l,this.files=[],this.currentPath="",this.serverDirectory="",this.pathParts=[],this.editingFile=null,this.fileContent="",this.originalFileContent="",this.fileContentChanged=!1,this.loading=!1,this.contextMenuVisible=!1,this.contextMenuTop=0,this.contextMenuLeft=0,this.selectedContextFile=null,this.showCreateFolderModal=!1,this.newFolderName="",this.showCreateFileModal=!1,this.newFileName="",this.showRenameModal=!1,this.renameNewName="",this.showDeleteConfirmModal=!1}ngOnInit(){const n=this.route.snapshot.paramMap.get("serverName");if(!n)return void this.router.navigate([""]);const o=this.storageService.getServer(n);o?(this.server=o,this.activeConnection=this.webConsoleService.connect(this.server.serverName),this.serverDirectory="",this.subscription=this.activeConnection.subject$.subscribe({next:s=>{this.processMessage(s)}}),this.loadFiles(this.serverDirectory)):this.router.navigate([""])}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processMessage(t){switch(t.status){case 2e3:const n=t;try{this.files=JSON.parse(n.files),this.files.sort((a,d)=>a.is_folder&&!d.is_folder?-1:!a.is_folder&&d.is_folder?1:a.name.localeCompare(d.name)),this.updatePathParts(n.currentPath)}catch(a){console.error("Error parsing file list:",a)}break;case 2001:this.loading=!1;const o=t;try{const a=JSON.parse(o.content);this.fileContent=a.is_binary?atob(a.content):a.content,this.originalFileContent=this.fileContent,this.fileContentChanged=!1}catch(a){console.error("Error parsing file content:",a),this.fileContent=""}break;case 2002:case 200:this.loading=!1,this.loadFiles(this.currentPath);break;case 2003:this.loading=!1;const s=t;try{const a=JSON.parse(s.content);this.downloadFileContent(a)}catch(a){console.error("Error processing download:",a)}break;case 400:case 403:case 404:case 500:const l=t;this.loading=!1,alert(l.message)}}updatePathParts(t){if(this.currentPath=t,""===this.serverDirectory&&(this.serverDirectory=t),t===this.serverDirectory||""===t)this.pathParts=[];else{const n=t.replace(this.serverDirectory,"").replace(/^\//,"");this.pathParts=n.split("/")}}loadFiles(t){this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileList,t)}refreshFiles(){this.loadFiles(this.currentPath)}navigateToRoot(){this.loadFiles(this.serverDirectory)}navigateToPath(t){const n=this.serverDirectory+"/"+this.pathParts.slice(0,t+1).join("/");this.loadFiles(n)}navigateToFolder(t){this.loadFiles(this.currentPath===this.serverDirectory?this.currentPath+t.name:this.currentPath+"/"+t.name)}goUp(){if(this.currentPath===this.serverDirectory)return;const t=this.currentPath.lastIndexOf("/");this.loadFiles(t<=this.serverDirectory.length?this.serverDirectory:this.currentPath.substring(0,t))}selectFile(t){this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileRead,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+t.name:this.currentPath+"/"+t.name})),this.editingFile=t}onContentChange(){this.fileContentChanged=this.fileContent!==this.originalFileContent}saveFile(){this.editingFile&&(this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileWrite,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+this.editingFile.name:this.currentPath+"/"+this.editingFile.name,content:this.fileContent})),this.fileContentChanged=!1)}cancelEdit(){this.editingFile=null,this.fileContent="",this.originalFileContent="",this.fileContentChanged=!1}getFileIcon(t){if(t.is_folder)return"fa-folder text-warning";switch(t.icon){case"file-code":return"fa-file-code text-primary";case"file-json":return"fa-file-code text-info";case"file-text":return"fa-file-alt text-secondary";case"file-image":return"fa-file-image text-success";case"file-archive":return"fa-file-archive text-warning";case"file-audio":return"fa-file-audio text-danger";case"file-video":return"fa-file-video text-primary";case"file-database":return"fa-database text-info";case"folder":return"fa-folder text-warning";default:return"fa-file text-muted"}}formatFileSize(t){if(0===t)return"-";const s=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB"][s]}triggerFileInput(){this.fileInput.nativeElement.click()}onFilesSelected(t){const n=t.target.files;if(0===n.length)return;this.loading=!0;let o=0;const s=n.length;for(let l=0;l<n.length;l++){const a=n[l],d=new FileReader;d.onload=g=>{const f=g.target.result.split(",")[1];this.webConsoleService.sendMessage(this.server.serverName,u.X.FileWrite,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+a.name:this.currentPath+"/"+a.name,content:f})),o++,o===s&&(this.loading=!1,this.loadFiles(this.currentPath))},d.readAsDataURL(a)}}downloadFile(t,n){n.stopPropagation(),this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileDownload,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+t.name:this.currentPath+"/"+t.name}))}downloadFileContent(t){const n=this.base64ToBlob(t.content),o=window.URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t.filename,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(o)}base64ToBlob(t){const n=atob(t),o=new Array(n.length);for(let l=0;l<n.length;l++)o[l]=n.charCodeAt(l);const s=new Uint8Array(o);return new Blob([s])}deleteFile(t,n){n.stopPropagation(),this.selectedContextFile=t,this.showDeleteConfirmModal=!0}confirmDelete(){this.selectedContextFile&&(this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileDelete,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+this.selectedContextFile.name:this.currentPath+"/"+this.selectedContextFile.name})),this.showDeleteConfirmModal=!1,this.selectedContextFile=null)}renameFile(){this.selectedContextFile&&this.renameNewName&&(this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileRename,JSON.stringify({oldPath:this.currentPath===this.serverDirectory?this.currentPath+this.selectedContextFile.name:this.currentPath+"/"+this.selectedContextFile.name,newPath:this.currentPath===this.serverDirectory?this.currentPath+this.renameNewName:this.currentPath+"/"+this.renameNewName})),this.showRenameModal=!1,this.renameNewName="",this.selectedContextFile=null)}createFolder(){this.newFolderName&&(this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileCreateFolder,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+this.newFolderName:this.currentPath+"/"+this.newFolderName})),this.showCreateFolderModal=!1,this.newFolderName="")}createFile(){this.newFileName&&(this.loading=!0,this.webConsoleService.sendMessage(this.server.serverName,u.X.FileWrite,JSON.stringify({path:this.currentPath===this.serverDirectory?this.currentPath+this.newFileName:this.currentPath+"/"+this.newFileName,content:""})),this.showCreateFileModal=!1,this.newFileName="")}onContextMenu(t,n){t.preventDefault(),this.selectedContextFile=n,this.contextMenuTop=t.clientY,this.contextMenuLeft=t.clientX,this.contextMenuVisible=!0}openFile(){this.selectedContextFile&&!this.selectedContextFile.is_folder&&this.selectFile(this.selectedContextFile),this.closeContextMenu()}downloadSelectedFile(){this.selectedContextFile&&this.downloadFile(this.selectedContextFile,new Event("click")),this.closeContextMenu()}renameSelectedFile(){this.selectedContextFile&&(this.renameNewName=this.selectedContextFile.name,this.showRenameModal=!0),this.closeContextMenu()}deleteSelectedFile(){this.selectedContextFile&&(this.showDeleteConfirmModal=!0),this.closeContextMenu()}copyPath(){this.selectedContextFile&&navigator.clipboard.writeText(this.currentPath===this.serverDirectory?this.currentPath+this.selectedContextFile.name:this.currentPath+"/"+this.selectedContextFile.name),this.closeContextMenu()}closeContextMenu(){this.contextMenuVisible=!1,this.selectedContextFile=null}closeAllModals(){this.showCreateFolderModal=!1,this.showCreateFileModal=!1,this.showRenameModal=!1,this.showDeleteConfirmModal=!1,this.newFolderName="",this.newFileName="",this.renameNewName=""}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.gz),e.Y36(C.F0),e.Y36(h.V),e.Y36(T.B),e.Y36(v.FF))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-files"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ee,5),e.Gf(te,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.fileInput=o.first),e.iGM(o=e.CRH())&&(n.editorTextarea=o.first)}},decls:32,vars:26,consts:[[1,"files-container"],[1,"files-header"],[1,"breadcrumb"],[1,"breadcrumb-item",3,"click"],[1,"fas","fa-home"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn","btn-secondary","btn-sm",3,"disabled","title","click"],[1,"fas","fa-arrow-up"],[1,"btn","btn-secondary","btn-sm",3,"title","click"],[1,"fas","fa-sync-alt"],[1,"btn","btn-primary","btn-sm",3,"title","click"],[1,"fas","fa-folder-plus"],[1,"fas","fa-file-plus"],[1,"fas","fa-upload"],["class","files-list",4,"ngIf"],["class","file-editor",4,"ngIf"],["class","context-menu",3,"top","left",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal custom-modal",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"breadcrumb-item"],[1,"clickable",3,"click"],[4,"ngIf"],[1,"files-list"],[1,"table","table-hover"],[2,"width","40%"],[2,"width","15%"],[2,"width","25%"],[2,"width","20%"],[3,"clickable","folder-row","click","contextmenu",4,"ngFor","ngForOf"],[3,"click","contextmenu"],["class","btn btn-sm btn-outline-primary",3,"title","click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"title","click"],[1,"fas","fa-trash"],[1,"btn","btn-sm","btn-outline-primary",3,"title","click"],[1,"fas","fa-download"],["colspan","4",1,"text-center","text-muted"],[1,"file-editor"],[1,"editor-header"],[1,"editor-title"],[1,"fas","fa-file-alt"],[1,"editor-actions"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"fas","fa-save"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fas","fa-times"],[1,"editor-content"],["spellcheck","false",1,"form-control","code-editor",3,"ngModel","ngModelChange"],["editorTextarea",""],[1,"context-menu"],[1,"context-menu-item",3,"click"],[1,"fas","fa-edit"],["class","context-menu-item",3,"click",4,"ngIf"],[1,"context-menu-item","text-danger",3,"click"],[1,"context-menu-divider"],[1,"fas","fa-copy"],[1,"modal-backdrop",3,"click"],[1,"modal","custom-modal"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],[1,"modal-body"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e.NdJ("click",function(){return n.navigateToRoot()}),e._UZ(4,"i",4),e._uU(5," / "),e.qZA(),e.YNc(6,oe,4,2,"span",5),e.qZA(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return n.goUp()}),e.ALo(9,"translate"),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.refreshFiles()}),e.ALo(12,"translate"),e._UZ(13,"i",10),e.qZA(),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.showCreateFolderModal=!0}),e.ALo(15,"translate"),e._UZ(16,"i",12),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return n.showCreateFileModal=!0}),e.ALo(18,"translate"),e._UZ(19,"i",13),e.qZA(),e.TgZ(20,"button",11),e.NdJ("click",function(){return n.triggerFileInput()}),e.ALo(21,"translate"),e._UZ(22,"i",14),e.qZA()()(),e.YNc(23,le,19,14,"div",15),e.YNc(24,ae,17,9,"div",16),e.YNc(25,de,19,17,"div",17),e.YNc(26,pe,1,0,"div",18),e.YNc(27,ue,17,13,"div",19),e.YNc(28,_e,17,13,"div",19),e.YNc(29,he,17,13,"div",19),e.YNc(30,ge,21,13,"div",19),e.YNc(31,fe,4,0,"div",20),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.pathParts),e.xp6(2),e.s9C("title",e.lcZ(9,16,"files.go_up")),e.Q6J("disabled",n.currentPath===n.serverDirectory),e.xp6(3),e.s9C("title",e.lcZ(12,18,"files.refresh")),e.xp6(3),e.s9C("title",e.lcZ(15,20,"files.create_folder")),e.xp6(3),e.s9C("title",e.lcZ(18,22,"files.create_file")),e.xp6(3),e.s9C("title",e.lcZ(21,24,"files.upload")),e.xp6(3),e.Q6J("ngIf",!n.editingFile),e.xp6(1),e.Q6J("ngIf",n.editingFile),e.xp6(1),e.Q6J("ngIf",n.contextMenuVisible),e.xp6(1),e.Q6J("ngIf",n.showCreateFolderModal||n.showRenameModal||n.showDeleteConfirmModal),e.xp6(1),e.Q6J("ngIf",n.showCreateFolderModal),e.xp6(1),e.Q6J("ngIf",n.showCreateFileModal),e.xp6(1),e.Q6J("ngIf",n.showRenameModal),e.xp6(1),e.Q6J("ngIf",n.showDeleteConfirmModal),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[m.sg,m.O5,c.Fj,c.JJ,c.On],pipes:[b.X$,m.uU],styles:[".files-container[_ngcontent-%COMP%]{position:relative;height:100%;padding:15px}.files-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #dee2e6}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;font-size:14px}.breadcrumb-item[_ngcontent-%COMP%]{color:#6c757d}.breadcrumb-item[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{color:#007bff;cursor:pointer}.breadcrumb-item[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]:hover{text-decoration:underline}.toolbar[_ngcontent-%COMP%]{display:flex;gap:8px}.toolbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 10px}.files-list[_ngcontent-%COMP%]{background:#fff;border-radius:4px;box-shadow:0 1px 3px #0000001a}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#495057;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.table[_ngcontent-%COMP%]   tr.clickable[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   tr.clickable[_ngcontent-%COMP%]:hover{background-color:#f1f3f5}.folder-row[_ngcontent-%COMP%]{background-color:#fffbf0!important}.folder-icon[_ngcontent-%COMP%]{color:#ffc107}.code-editor[_ngcontent-%COMP%]{font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:14px;line-height:1.5;min-height:400px;resize:vertical}.file-editor[_ngcontent-%COMP%]{background:#fff;border-radius:4px;box-shadow:0 1px 3px #0000001a}.editor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background:#f8f9fa;border-bottom:1px solid #dee2e6}.editor-title[_ngcontent-%COMP%]{font-weight:600;color:#495057}.editor-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.editor-content[_ngcontent-%COMP%]{padding:15px}.context-menu[_ngcontent-%COMP%]{position:fixed;z-index:1000;min-width:180px;background:#fff;border:1px solid #dee2e6;border-radius:4px;box-shadow:0 2px 10px #00000026}.context-menu-item[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;display:flex;align-items:center;gap:8px}.context-menu-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.context-menu-item.text-danger[_ngcontent-%COMP%]{color:#dc3545}.context-menu-divider[_ngcontent-%COMP%]{height:1px;background:#dee2e6;margin:4px 0}.custom-modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1050;background:#fff;border-radius:8px;box-shadow:0 5px 20px #0003;width:400px;max-width:90%}.custom-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #dee2e6}.custom-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d}.custom-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:15px}.custom-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:15px;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:8px}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1040}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,.7);display:flex;justify-content:center;align-items:center;z-index:100}@media (max-width: 768px){.files-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.toolbar[_ngcontent-%COMP%]{flex-wrap:wrap}}"]}),r})();function ve(r,i){1&r&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADDEDITSERVER.AddNewServer")))}function Ce(r,i){1&r&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ADDEDITSERVER.ServerAlreadyExist")," "))}function xe(r,i){1&r&&(e.TgZ(0,"p",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADDEDITSERVER.SslEnabledMandatory")))}function be(r,i){1&r&&(e.TgZ(0,"div",2)(1,"button",22),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"ADDEDITSERVER.Add")))}let Ze=(()=>{class r{constructor(t){this.storageService=t,this.asModal=!1,this.isClientOverHttps="https:"==location.protocol,this.addServerFormGroup=new c.cw({serverNameControl:new c.NI("",[c.kI.required,c.kI.maxLength(50)]),serverIpControl:new c.NI("",[c.kI.required]),serverPortControl:new c.NI(8080,[c.kI.required,c.kI.min(0),c.kI.max(99999)]),serverPasswordControl:new c.NI(""),serverSslEnabledControl:new c.NI({value:"https:"==location.protocol,disabled:"https:"==location.protocol})}),this.serverAlreadyExists=!1}ngOnInit(){}saveServer(t){var n,o,s,l,a;if(!this.addServerFormGroup.valid)return void this.addServerFormGroup.markAllAsTouched();const d=null===(n=this.addServerFormGroup.get("serverNameControl"))||void 0===n?void 0:n.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"").replace(/"/g,""),g=null===(o=this.addServerFormGroup.get("serverIpControl"))||void 0===o?void 0:o.value,f=null===(s=this.addServerFormGroup.get("serverPortControl"))||void 0===s?void 0:s.value,Z=(null===(l=this.addServerFormGroup.get("serverPasswordControl"))||void 0===l?void 0:l.value)||void 0,y=null===(a=this.addServerFormGroup.get("serverSslEnabledControl"))||void 0===a?void 0:a.value;if(this.serverAlreadyExists=null!=this.storageService.getAllServers().find(De=>De.serverName==d),this.serverAlreadyExists)return;let x;x=y?"wss://"+g+":"+f:"ws://"+g+":"+f,this.storageService.saveServer(d,x,Z),this.asModal&&(null==t||t.close("Save server"))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-server"]],inputs:{asModal:"asModal"},decls:43,vars:46,consts:[[4,"ngIf"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-12"],["for","inputName",1,"form-label"],["type","text","id","inputName","formControlName","serverNameControl",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["class","text-danger",4,"ngIf"],[1,"col-lg-10"],["for","inputIp",1,"form-label"],["type","text","id","inputIp","formControlName","serverIpControl",1,"form-control",3,"placeholder"],[1,"col-lg-2"],["for","inputPort",1,"form-label"],["type","number","id","inputPort","formControlName","serverPortControl",1,"form-control"],["for","inputPassword",1,"form-label"],["type","password","id","inputPassword","formControlName","serverPasswordControl",1,"form-control",3,"placeholder"],[1,"form-check"],["type","checkbox","id","sslCheck","formControlName","serverSslEnabledControl",1,"form-check-input"],["for","sslCheck",1,"form-check-label"],["class","text-warning",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-danger"],[1,"text-warning"],["type","submit",1,"btn","btn-primary"]],template:function(t,n){if(1&t&&(e.YNc(0,ve,3,3,"h1",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return n.saveServer()}),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",4),e.ALo(7,"translate"),e.TgZ(8,"div",5),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,Ce,3,3,"div",6),e.qZA(),e.TgZ(12,"div",7)(13,"label",8),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",9),e.ALo(17,"translate"),e.TgZ(18,"div",5),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",10)(22,"label",11),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",12),e.TgZ(26,"div",5),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",2)(30,"label",13),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",14),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"div",2)(36,"div",15),e._UZ(37,"input",16),e.TgZ(38,"label",17),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.YNc(41,xe,3,3,"p",18),e.qZA()(),e.YNc(42,be,4,3,"div",19),e.qZA()),2&t){let o,s,l,a;e.Q6J("ngIf",!n.asModal),e.xp6(1),e.Q6J("formGroup",n.addServerFormGroup),e.xp6(3),e.Oqu(e.lcZ(5,24,"ADDEDITSERVER.Name")),e.xp6(2),e.ekj("is-invalid",(null==(o=n.addServerFormGroup.get("serverNameControl"))?null:o.invalid)&&((null==(o=n.addServerFormGroup.get("serverNameControl"))?null:o.dirty)||(null==(o=n.addServerFormGroup.get("serverNameControl"))?null:o.touched))),e.s9C("placeholder",e.lcZ(7,26,"ADDEDITSERVER.NamePlaceholder")),e.xp6(3),e.hij(" ",e.lcZ(10,28,"ADDEDITSERVER.RequiredOrTooLongField")," "),e.xp6(2),e.Q6J("ngIf",n.serverAlreadyExists),e.xp6(3),e.Oqu(e.lcZ(15,30,"ADDEDITSERVER.Ip")),e.xp6(2),e.ekj("is-invalid",(null==(s=n.addServerFormGroup.get("serverIpControl"))?null:s.invalid)&&((null==(s=n.addServerFormGroup.get("serverIpControl"))?null:s.dirty)||(null==(s=n.addServerFormGroup.get("serverIpControl"))?null:s.touched))),e.s9C("placeholder",e.lcZ(17,32,"ADDEDITSERVER.IpPlaceholder")),e.xp6(3),e.hij(" ",e.lcZ(20,34,"ADDEDITSERVER.RequiredField")," "),e.xp6(4),e.Oqu(e.lcZ(24,36,"ADDEDITSERVER.Port")),e.xp6(2),e.ekj("is-invalid",(null==(l=n.addServerFormGroup.get("serverPortControl"))?null:l.invalid)&&((null==(l=n.addServerFormGroup.get("serverPortControl"))?null:l.dirty)||(null==(l=n.addServerFormGroup.get("serverPortControl"))?null:l.touched))),e.xp6(2),e.hij(" ",e.lcZ(28,38,"ADDEDITSERVER.InvalidPort")," "),e.xp6(4),e.Oqu(e.lcZ(32,40,"ADDEDITSERVER.Password")),e.xp6(2),e.ekj("is-invalid",(null==(a=n.addServerFormGroup.get("serverPasswordControl"))?null:a.invalid)&&((null==(a=n.addServerFormGroup.get("serverPasswordControl"))?null:a.dirty)||(null==(a=n.addServerFormGroup.get("serverPasswordControl"))?null:a.touched))),e.s9C("placeholder",e.lcZ(34,42,"ADDEDITSERVER.PasswordPlaceholder")),e.xp6(6),e.hij(" ",e.lcZ(40,44,"ADDEDITSERVER.SslEnabled")," "),e.xp6(2),e.Q6J("ngIf",n.isClientOverHttps),e.xp6(1),e.Q6J("ngIf",!n.asModal)}},directives:[m.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.wV,c.Wl],pipes:[b.X$],styles:[""]}),r})();function Se(r,i){1&r&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADDEDITSERVER.EditServer")))}function Ae(r,i){1&r&&(e.TgZ(0,"p",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADDEDITSERVER.SslEnabledMandatory")))}function Te(r,i){1&r&&(e.TgZ(0,"div",2)(1,"button",24),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"ADDEDITSERVER.EditServer")))}let we=(()=>{class r{constructor(t){this.storageService=t,this.asModal=!1,this.isClientOverHttps="https:"==location.protocol,this.editServerFormGroup=new c.cw({serverNameControl:new c.NI({value:"",disabled:!0},[c.kI.required,c.kI.maxLength(50)]),serverIpControl:new c.NI("",[c.kI.required]),serverPortControl:new c.NI(8080,[c.kI.required,c.kI.min(0),c.kI.max(99999)]),serverPasswordControl:new c.NI({value:"",disabled:!0}),serverSslEnabledControl:new c.NI({value:"https:"==location.protocol,disabled:"https:"==location.protocol}),keepServerPasswordControl:new c.NI(!0)})}ngOnInit(){var t,n,o,s,l;const a=this.storageService.getServer(this.serverNameBeingEdited);if(a){const d=a.serverURI.replace("wss://","").replace("ws://",""),g=d.slice(0,d.lastIndexOf(":")),f=d.slice(d.lastIndexOf(":")+1);null===(t=this.editServerFormGroup.get("serverNameControl"))||void 0===t||t.setValue(a.serverName),null===(n=this.editServerFormGroup.get("serverIpControl"))||void 0===n||n.setValue(g),null===(o=this.editServerFormGroup.get("serverPortControl"))||void 0===o||o.setValue(f),a.serverURI.startsWith("wss://")?null===(s=this.editServerFormGroup.get("serverSslEnabledControl"))||void 0===s||s.setValue(!0):null===(l=this.editServerFormGroup.get("serverSslEnabledControl"))||void 0===l||l.setValue(!1)}}onUpdatePasswordCheckboxChange(){var t,n,o,s;(null===(t=this.editServerFormGroup.get("keepServerPasswordControl"))||void 0===t?void 0:t.value)?(null===(n=this.editServerFormGroup.get("serverPasswordControl"))||void 0===n||n.disable(),null===(o=this.editServerFormGroup.get("serverPasswordControl"))||void 0===o||o.setValue("")):null===(s=this.editServerFormGroup.get("serverPasswordControl"))||void 0===s||s.enable()}saveServer(t){var n,o,s,l,a;if(!this.editServerFormGroup.valid)return void this.editServerFormGroup.markAllAsTouched();const d=null===(n=this.editServerFormGroup.get("serverNameControl"))||void 0===n?void 0:n.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"").replace(/"/g,""),g=null===(o=this.editServerFormGroup.get("serverIpControl"))||void 0===o?void 0:o.value,f=null===(s=this.editServerFormGroup.get("serverPortControl"))||void 0===s?void 0:s.value,Z=(null===(l=this.editServerFormGroup.get("serverPasswordControl"))||void 0===l?void 0:l.value)||null;let x;x=(null===(a=this.editServerFormGroup.get("serverSslEnabledControl"))||void 0===a?void 0:a.value)?"wss://"+g+":"+f:"ws://"+g+":"+f,this.storageService.saveServer(d,x,Z),this.asModal&&(null==t||t.close("Save server"))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-server"]],inputs:{asModal:"asModal",serverNameBeingEdited:"serverNameBeingEdited"},decls:48,vars:46,consts:[[4,"ngIf"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-12"],["for","inputName",1,"form-label"],["type","text","id","inputName","formControlName","serverNameControl",1,"form-control",3,"placeholder"],[1,"form-text","text-warning"],[1,"col-lg-10"],["for","inputIp",1,"form-label"],["type","text","id","inputIp","formControlName","serverIpControl",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],[1,"col-lg-2"],["for","inputPort",1,"form-label"],["type","number","id","inputPort","formControlName","serverPortControl",1,"form-control"],["for","inputPassword",1,"form-label"],["type","password","id","inputPassword","formControlName","serverPasswordControl",1,"form-control",3,"placeholder"],[1,"col-md-6"],[1,"form-check"],["type","checkbox","id","updatePasswordCheck","formControlName","keepServerPasswordControl",1,"form-check-input",3,"change"],["for","updatePasswordCheck",1,"form-check-label"],["type","checkbox","id","sslCheck","formControlName","serverSslEnabledControl",1,"form-check-input"],["for","sslCheck",1,"form-check-label"],["class","text-warning",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-warning"],["type","submit",1,"btn","btn-primary"]],template:function(t,n){if(1&t&&(e.YNc(0,Se,3,3,"h1",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return n.saveServer()}),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",4),e.ALo(7,"translate"),e.TgZ(8,"small",5),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",6)(12,"label",7),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",8),e.ALo(16,"translate"),e.TgZ(17,"div",9),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",10)(21,"label",11),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",12),e.TgZ(25,"div",9),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",2)(29,"label",13),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",14),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",15)(35,"div",16)(36,"input",17),e.NdJ("change",function(){return n.onUpdatePasswordCheckboxChange()}),e.qZA(),e.TgZ(37,"label",18),e._uU(38),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",15)(41,"div",16),e._UZ(42,"input",19),e.TgZ(43,"label",20),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.YNc(46,Ae,3,3,"p",21),e.qZA()(),e.YNc(47,Te,4,3,"div",22),e.qZA()),2&t){let o,s,l;e.Q6J("ngIf",!n.asModal),e.xp6(1),e.Q6J("formGroup",n.editServerFormGroup),e.xp6(3),e.Oqu(e.lcZ(5,22,"ADDEDITSERVER.Name")),e.xp6(2),e.s9C("placeholder",e.lcZ(7,24,"ADDEDITSERVER.NamePlaceholder")),e.xp6(3),e.Oqu(e.lcZ(10,26,"ADDEDITSERVER.NameNotEditable")),e.xp6(4),e.Oqu(e.lcZ(14,28,"ADDEDITSERVER.Ip")),e.xp6(2),e.ekj("is-invalid",(null==(o=n.editServerFormGroup.get("serverIpControl"))?null:o.invalid)&&((null==(o=n.editServerFormGroup.get("serverIpControl"))?null:o.dirty)||(null==(o=n.editServerFormGroup.get("serverIpControl"))?null:o.touched))),e.s9C("placeholder",e.lcZ(16,30,"ADDEDITSERVER.IpPlaceholder")),e.xp6(3),e.hij(" ",e.lcZ(19,32,"ADDEDITSERVER.RequiredField")," "),e.xp6(4),e.Oqu(e.lcZ(23,34,"ADDEDITSERVER.Port")),e.xp6(2),e.ekj("is-invalid",(null==(s=n.editServerFormGroup.get("serverPortControl"))?null:s.invalid)&&((null==(s=n.editServerFormGroup.get("serverPortControl"))?null:s.dirty)||(null==(s=n.editServerFormGroup.get("serverPortControl"))?null:s.touched))),e.xp6(2),e.hij(" ",e.lcZ(27,36,"ADDEDITSERVER.InvalidPort")," "),e.xp6(4),e.Oqu(e.lcZ(31,38,"ADDEDITSERVER.Password")),e.xp6(2),e.ekj("is-invalid",(null==(l=n.editServerFormGroup.get("serverPasswordControl"))?null:l.invalid)&&((null==(l=n.editServerFormGroup.get("serverPasswordControl"))?null:l.dirty)||(null==(l=n.editServerFormGroup.get("serverPasswordControl"))?null:l.touched))),e.s9C("placeholder",e.lcZ(33,40,"ADDEDITSERVER.PasswordPlaceholder")),e.xp6(6),e.hij(" ",e.lcZ(39,42,"ADDEDITSERVER.KeepPasswordUnchanged")," "),e.xp6(6),e.hij(" ",e.lcZ(45,44,"ADDEDITSERVER.SslEnabled")," "),e.xp6(2),e.Q6J("ngIf",n.isClientOverHttps),e.xp6(1),e.Q6J("ngIf",!n.asModal)}},directives:[m.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.wV,c.Wl],pipes:[b.X$],styles:[""]}),r})();function ye(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HOME.NoServersAdded")))}function Fe(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",15),e._uU(4),e.qZA(),e.TgZ(5,"td",16)(6,"button",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).connectServer(s.serverName)}),e.ALo(7,"translate"),e._UZ(8,"fa-icon",4),e.qZA(),e.TgZ(9,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).moveServerUp(s.serverName)}),e.ALo(10,"translate"),e._UZ(11,"fa-icon",4),e.qZA(),e.TgZ(12,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).moveServerDown(s.serverName)}),e.ALo(13,"translate"),e._UZ(14,"fa-icon",4),e.qZA(),e.TgZ(15,"button",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2),a=e.MAs(15);return l.serverClicked=s,l.openModal(a)}),e.ALo(16,"translate"),e._UZ(17,"fa-icon",4),e.qZA(),e.TgZ(18,"button",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).deleteServer(s.serverName)}),e.ALo(19,"translate"),e._UZ(20,"fa-icon",4),e.qZA()(),e.TgZ(21,"td",21)(22,"button",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2),a=e.MAs(17);return l.serverClicked=s,l.openOffcanvas(a)}),e._UZ(23,"fa-icon",4),e.qZA()()()}if(2&r){const t=i.$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(t.serverName),e.xp6(1),e.ekj("blurry-text",n.blurryUris),e.xp6(1),e.Oqu(t.serverURI),e.xp6(2),e.Q6J("ngbTooltip",e.lcZ(7,17,"HOME.Connect"))("ngClass",n.isConnectedTo(t.serverName)?"btn-success":"btn-primary"),e.xp6(2),e.Q6J("icon",n.icons.faTerminal),e.xp6(1),e.Q6J("ngbTooltip",e.lcZ(10,19,"HOME.MoveUp")),e.xp6(2),e.Q6J("icon",n.icons.faArrowUp),e.xp6(1),e.Q6J("ngbTooltip",e.lcZ(13,21,"HOME.MoveDown")),e.xp6(2),e.Q6J("icon",n.icons.faArrowDown),e.xp6(1),e.Q6J("ngbTooltip",e.lcZ(16,23,"HOME.Edit"))("disabled",n.isConnectedTo(t.serverName)),e.xp6(2),e.Q6J("icon",n.icons.faEdit),e.xp6(1),e.Q6J("ngbTooltip",e.lcZ(19,25,"HOME.Delete")),e.xp6(2),e.Q6J("icon",n.icons.faTrashCan),e.xp6(3),e.Q6J("icon",n.icons.faAnglesRight)}}function ke(r,i){if(1&r&&(e.TgZ(0,"div",10)(1,"table",11)(2,"thead")(3,"tr")(4,"th",12),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",13),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",12),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,Fe,24,27,"tr",14),e.qZA()()()),2&r){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,4,"GENERAL.Server")),e.xp6(3),e.Oqu(e.lcZ(9,6,"HOME.ServerUri")),e.xp6(3),e.Oqu(e.lcZ(12,8,"HOME.Actions")),e.xp6(3),e.Q6J("ngForOf",t.servers)}}function Me(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",23)(1,"h4",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA()(),e.TgZ(5,"div",26),e._UZ(6,"app-add-server",27,28),e.qZA(),e.TgZ(8,"div",29)(9,"button",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.MAs(7).saveServer(s)}),e._uU(10),e.ALo(11,"translate"),e.qZA()()}2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,3,"ADDEDITSERVER.AddNewServer")),e.xp6(4),e.Q6J("asModal",!0),e.xp6(4),e.Oqu(e.lcZ(11,5,"ADDEDITSERVER.Add")))}function Ie(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",23)(1,"h4",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA()(),e.TgZ(5,"div",26),e._UZ(6,"app-edit-server",30,31),e.qZA(),e.TgZ(8,"div",29)(9,"button",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.MAs(7).saveServer(s)}),e._uU(10),e.ALo(11,"translate"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"ADDEDITSERVER.EditServer")),e.xp6(4),e.Q6J("asModal",!0)("serverNameBeingEdited",t.serverClicked.serverName),e.xp6(4),e.Oqu(e.lcZ(11,6,"ADDEDITSERVER.EditServer"))}}function Ne(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"h4",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA()(),e.TgZ(5,"div",34)(6,"p")(7,"strong"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"p")(12,"strong"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"p")(17,"strong"),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"p")(21,"button",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return s.dismiss("Action"),l.connectServer(l.serverClicked.serverName)}),e._UZ(22,"fa-icon",4),e.qZA(),e.TgZ(23,"button",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return s.dismiss("Action"),l.moveServerUp(l.serverClicked.serverName)}),e._UZ(24,"fa-icon",4),e.qZA(),e.TgZ(25,"button",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return s.dismiss("Action"),l.moveServerDown(l.serverClicked.serverName)}),e._UZ(26,"fa-icon",4),e.qZA(),e.TgZ(27,"button",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(),a=e.MAs(15);return s.dismiss("Action"),l.openModal(a)}),e._UZ(28,"fa-icon",4),e.qZA(),e.TgZ(29,"button",38),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return s.dismiss("Action"),l.deleteServer(l.serverClicked.serverName)}),e._UZ(30,"fa-icon",4),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,13,"HOME.ServerDetails")),e.xp6(6),e.hij("",e.lcZ(9,15,"GENERAL.Server"),":"),e.xp6(2),e.hij(" ",t.serverClicked.serverName,""),e.xp6(3),e.hij("",e.lcZ(14,17,"HOME.ServerUri"),":"),e.xp6(2),e.hij(" ",t.serverClicked.serverURI,""),e.xp6(3),e.Oqu(e.lcZ(19,19,"HOME.Actions")),e.xp6(3),e.Q6J("ngClass",t.isConnectedTo(t.serverClicked.serverName)?"btn-success":"btn-primary"),e.xp6(1),e.Q6J("icon",t.icons.faTerminal),e.xp6(2),e.Q6J("icon",t.icons.faArrowUp),e.xp6(2),e.Q6J("icon",t.icons.faArrowDown),e.xp6(1),e.Q6J("disabled",t.isConnectedTo(t.serverClicked.serverName)),e.xp6(1),e.Q6J("icon",t.icons.faEdit),e.xp6(2),e.Q6J("icon",t.icons.faTrashCan)}}let q=(()=>{class r{constructor(t,n,o,s,l){this.storageService=t,this.webConsoleService=n,this.modalService=o,this.offcanvasService=s,this.router=l,this.icons=S.P,this.blurryUris=!0,this.servers=[],this.currentlyConnectedServers=[]}ngOnInit(){this.blurryUris=this.storageService.getSetting(h.U.BlurryUri),this.refreshServerList(),this.currentlyConnectedServers=this.webConsoleService.getCurrentConnectedServers(),this.webConsoleService.getActiveConnectionsChangedSubject().subscribe({next:()=>this.currentlyConnectedServers=this.webConsoleService.getCurrentConnectedServers()})}refreshServerList(){this.servers=this.storageService.getAllServers()}isConnectedTo(t){return this.currentlyConnectedServers.includes(t)}openModal(t){this.modalService.open(t,{size:"lg"}).result.then(n=>{this.refreshServerList()},n=>{this.refreshServerList()})}openOffcanvas(t){this.offcanvasService.open(t,{ariaLabelledBy:"offcanvas-server-details",position:"end"}).result.then(n=>{},n=>{})}connectServer(t){this.router.navigate(["console",t])}moveServerUp(t){const n=this.servers.findIndex(o=>o.serverName==t);this.storageService.moveServerToIndex(t,n-1),this.refreshServerList()}moveServerDown(t){const n=this.servers.findIndex(o=>o.serverName==t);this.storageService.moveServerToIndex(t,n+1),this.refreshServerList()}deleteServer(t){this.webConsoleService.closeConnection(t),this.storageService.deleteServer(t),this.refreshServerList()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.V),e.Y36(T.B),e.Y36(v.FF),e.Y36(v._B),e.Y36(C.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-index"]],decls:18,vars:9,consts:[[1,"row","mb-3"],[1,"col"],[1,"col-md-auto","d-flex","align-self-center"],[1,"btn","btn-primary",3,"click"],[3,"icon"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],["addModalContent",""],["editModalContent",""],["serverDetailsOffcanvas",""],[1,"table-responsive"],[1,"table","table-striped","table-hover","text-center"],["scope","col"],["scope","col",1,"d-none","d-lg-table-cell"],[4,"ngFor","ngForOf"],[1,"d-none","d-lg-table-cell"],[1,"d-none","d-lg-table-cell","w-25"],["type","button",1,"btn","btn-primary","me-1",3,"ngbTooltip","ngClass","click"],["type","button",1,"btn","btn-primary","me-1",3,"ngbTooltip","click"],["type","button",1,"btn","btn-primary","me-1",3,"ngbTooltip","disabled","click"],["type","button",1,"btn","btn-danger",3,"ngbTooltip","click"],[1,"d-lg-none","w-25"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"asModal"],["addServer",""],[1,"modal-footer"],[3,"asModal","serverNameBeingEdited"],["editServer",""],[1,"offcanvas-header"],["id","offcanvas-basic-title",1,"offcanvas-title"],[1,"offcanvas-body"],["type","button",1,"btn","btn-primary","me-1",3,"ngClass","click"],["type","button",1,"btn","btn-primary","me-1",3,"click"],["type","button",1,"btn","btn-primary","me-1",3,"disabled","click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(13);return n.openModal(l)}),e._UZ(7,"fa-icon",4),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.YNc(10,ye,3,3,"p",5),e.YNc(11,ke,15,10,"div",6),e.YNc(12,Me,12,7,"ng-template",null,7,e.W1O),e.YNc(14,Ie,12,8,"ng-template",null,8,e.W1O),e.YNc(16,Ne,31,21,"ng-template",null,9,e.W1O)}2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"HOME.YourServers")),e.xp6(4),e.Q6J("icon",n.icons.faAdd),e.xp6(1),e.hij(" ",e.lcZ(9,7,"ADDEDITSERVER.AddNewServer")," "),e.xp6(2),e.Q6J("ngIf",0==n.servers.length),e.xp6(1),e.Q6J("ngIf",n.servers.length>0))},directives:[w.BN,m.O5,m.sg,v._L,m.mk,Ze,we],pipes:[b.X$],styles:[".blurry-text[_ngcontent-%COMP%]{text-shadow:0 0 8px black;color:transparent!important}"]}),r})();var Ee=_(8543);function qe(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeMigrateCollapse()}),e._UZ(1,"fa-icon",35),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.icons.faClose)}}const Ue=[{path:"console/:serverName",component:K},{path:"files/:serverName",component:me},{path:"settings",component:(()=>{class r{constructor(t,n){this.storageService=t,this.languageService=n,this.icons=S.P,this.exportContainerCollapsed=!0,this.exportString="",this.importContainerCollapsed=!0,this.importString="",this.errorOccuredImporting=null}ngOnInit(){this.isDateSwitchChecked=this.storageService.getSetting(h.U.DateTimePrefix),this.isLogFileSwitchChecked=this.storageService.getSetting(h.U.RetrieveLogFile),this.isBlurrySwitchChecked=this.storageService.getSetting(h.U.BlurryUri),this.isWiderSwitchChecked=this.storageService.getSetting(h.U.WiderViewport),this.savedLanguage=this.storageService.getLanguage()}onSwitchChanges(){this.storageService.setSetting(h.U.DateTimePrefix,this.isDateSwitchChecked),this.storageService.setSetting(h.U.RetrieveLogFile,this.isLogFileSwitchChecked),this.storageService.setSetting(h.U.BlurryUri,this.isBlurrySwitchChecked),this.storageService.setSetting(h.U.WiderViewport,this.isWiderSwitchChecked)}openExportCollapse(){this.exportString=this.storageService.getExportString(),this.exportContainerCollapsed=!1,this.importContainerCollapsed=!0}openImportCollapse(){this.exportContainerCollapsed=!0,this.importContainerCollapsed=!1}closeMigrateCollapse(){this.exportContainerCollapsed=!0,this.importContainerCollapsed=!0}onImportClick(){this.errorOccuredImporting=this.storageService.importSettings(this.importString)}onLanguageChanged(){console.log(`Change language to ${this.savedLanguage}`),this.languageService.setLanguage(this.savedLanguage)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.V),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-settings"]],decls:91,vars:67,consts:[[1,"mb-2"],[1,"form-check","form-switch"],["type","checkbox","id","showDateSettingsSwitch",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","showDateSettingsSwitch",1,"form-check-label"],["type","checkbox","id","readLogFileSwitch",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","readLogFileSwitch",1,"form-check-label"],["type","checkbox","id","showUriSwitch",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","showUriSwitch",1,"form-check-label"],["type","checkbox","id","widerSwitch",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","widerSwitch",1,"form-check-label"],["type","button","aria-controls","collapseExport",1,"btn","btn-outline-primary",3,"click"],["type","button","aria-controls","collapseImport",1,"btn","btn-outline-primary","ms-2",3,"click"],["type","button","class","btn btn-outline-primary ms-2",3,"click",4,"ngIf"],[3,"ngbCollapse","ngbCollapseChange"],["collapseExport","ngbCollapse"],[1,"card"],[1,"card-body"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["collapseImport","ngbCollapse"],[1,"input-group","mb-3"],["type","text","aria-label","Paste import string...","aria-describedby","button-import",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","button","id","button-import",1,"btn","btn-outline-primary",3,"click"],[1,"valid-feedback"],[1,"invalid-feedback"],["aria-label","Language selector",1,"form-select",3,"ngModel","ngModelChange","change"],["value","en"],["value","es"],["value","de"],["value","fr"],["value","no"],["value","pl"],["value","ru"],["value","zh"],["type","button",1,"btn","btn-outline-primary","ms-2",3,"click"],[3,"icon"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",0)(7,"div",1)(8,"input",2),e.NdJ("ngModelChange",function(s){return n.isDateSwitchChecked=s})("change",function(){return n.onSwitchChanges()}),e.qZA(),e.TgZ(9,"label",3),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",1)(13,"input",4),e.NdJ("ngModelChange",function(s){return n.isLogFileSwitchChecked=s})("change",function(){return n.onSwitchChanges()}),e.qZA(),e.TgZ(14,"label",5),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",1)(18,"input",6),e.NdJ("ngModelChange",function(s){return n.isBlurrySwitchChecked=s})("change",function(){return n.onSwitchChanges()}),e.qZA(),e.TgZ(19,"label",7),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",1)(23,"input",8),e.NdJ("ngModelChange",function(s){return n.isWiderSwitchChecked=s})("change",function(){return n.onSwitchChanges()}),e.qZA(),e.TgZ(24,"label",9),e._uU(25),e.ALo(26,"translate"),e.qZA()()(),e._UZ(27,"hr"),e.TgZ(28,"h2"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"p"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",0)(35,"p")(36,"button",10),e.NdJ("click",function(){return n.openExportCollapse()}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"button",11),e.NdJ("click",function(){return n.openImportCollapse()}),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.YNc(42,qe,2,1,"button",12),e.qZA(),e.TgZ(43,"div",13,14),e.NdJ("ngbCollapseChange",function(s){return n.exportContainerCollapsed=s}),e.TgZ(45,"div",15)(46,"div",16)(47,"h6",17),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"p",18),e._uU(51),e.qZA()()()(),e.TgZ(52,"div",13,19),e.NdJ("ngbCollapseChange",function(s){return n.importContainerCollapsed=s}),e.TgZ(54,"div",20)(55,"input",21),e.NdJ("ngModelChange",function(s){return n.importString=s}),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"button",22),e.NdJ("click",function(){return n.onImportClick()}),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",23),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"div",24),e._uU(64),e.ALo(65,"translate"),e.qZA()()(),e._UZ(66,"hr"),e.TgZ(67,"h2"),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"p"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"div",0)(74,"select",25),e.NdJ("ngModelChange",function(s){return n.savedLanguage=s})("change",function(){return n.onLanguageChanged()}),e.TgZ(75,"option",26),e._uU(76,"English"),e.qZA(),e.TgZ(77,"option",27),e._uU(78,"Espa\xf1ol"),e.qZA(),e.TgZ(79,"option",28),e._uU(80,"Deutsch"),e.qZA(),e.TgZ(81,"option",29),e._uU(82,"Fran\xe7ais"),e.qZA(),e.TgZ(83,"option",30),e._uU(84,"Norsk"),e.qZA(),e.TgZ(85,"option",31),e._uU(86,"Polski"),e.qZA(),e.TgZ(87,"option",32),e._uU(88,"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"),e.qZA(),e.TgZ(89,"option",33),e._uU(90,"\u4e2d\u6587"),e.qZA()()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,33,"SETTINGS.WebConsoleClientSettings")),e.xp6(3),e.Oqu(e.lcZ(5,35,"SETTINGS.GeneralSettings")),e.xp6(4),e.Q6J("ngModel",n.isDateSwitchChecked),e.xp6(2),e.Oqu(e.lcZ(11,37,"SETTINGS.ShowTimeOnConsoleLine")),e.xp6(3),e.Q6J("ngModel",n.isLogFileSwitchChecked),e.xp6(2),e.Oqu(e.lcZ(16,39,"SETTINGS.RetrieveFullLogOnConnect")),e.xp6(3),e.Q6J("ngModel",n.isBlurrySwitchChecked),e.xp6(2),e.Oqu(e.lcZ(21,41,"SETTINGS.BlurryUriHomepage")),e.xp6(3),e.Q6J("ngModel",n.isWiderSwitchChecked),e.xp6(2),e.Oqu(e.lcZ(26,43,"SETTINGS.WiderViewport")),e.xp6(4),e.Oqu(e.lcZ(30,45,"SETTINGS.MigrateData")),e.xp6(3),e.Oqu(e.lcZ(33,47,"SETTINGS.MigrateDataDescription")),e.xp6(4),e.uIk("aria-expanded",!n.exportContainerCollapsed),e.xp6(1),e.hij(" ",e.lcZ(38,49,"SETTINGS.ExportData")," "),e.xp6(2),e.uIk("aria-expanded",!n.exportContainerCollapsed),e.xp6(1),e.hij(" ",e.lcZ(41,51,"SETTINGS.ImportData")," "),e.xp6(2),e.Q6J("ngIf",!n.exportContainerCollapsed||!n.importContainerCollapsed),e.xp6(1),e.Q6J("ngbCollapse",n.exportContainerCollapsed),e.xp6(5),e.Oqu(e.lcZ(49,53,"SETTINGS.CopyString")),e.xp6(3),e.Oqu(n.exportString),e.xp6(1),e.Q6J("ngbCollapse",n.importContainerCollapsed),e.xp6(2),e.ekj("is-valid",!0===n.errorOccuredImporting)("is-invalid",!1===n.errorOccuredImporting),e.xp6(1),e.s9C("placeholder",e.lcZ(56,55,"SETTINGS.PasteString")),e.Q6J("ngModel",n.importString),e.xp6(3),e.Oqu(e.lcZ(59,57,"SETTINGS.Import")),e.xp6(3),e.hij(" ",e.lcZ(62,59,"SETTINGS.ImportSuccessful")," "),e.xp6(3),e.hij(" ",e.lcZ(65,61,"SETTINGS.ImportFailed")," "),e.xp6(4),e.Oqu(e.lcZ(69,63,"SETTINGS.Language")),e.xp6(3),e.Oqu(e.lcZ(72,65,"SETTINGS.SelectLanguage")),e.xp6(3),e.Q6J("ngModel",n.savedLanguage))},directives:[c.Wl,c.JJ,c.On,m.O5,w.BN,v._D,c.Fj,c.EJ,c.YN,c.Kr],pipes:[b.X$],styles:[""]}),r})()},{path:"",component:q},{path:"**",component:q}];let Oe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[C.Bz.forChild(Ue)],C.Bz]}),r})();var Pe=_(4466);let Le=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[Oe,Pe.m,c.u5]]}),r})()}}]);